
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Tech With K">
    <title>Tag: Web - Tech With K</title>
    <meta name="author" content="Koorosh">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Tech With K">
<meta property="og:url" content="https://blog.koorosh.dev/tags/Web/index.html">
<meta property="og:site_name" content="Tech With K">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Koorosh">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@kooroshh">
    
    
        
    
    
        <meta property="og:image" content="https://www.gravatar.com/avatar/0f50eb4dae65a5398f5884cbbc063ace?s=640"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="../../assets/css/style-z2okfa75rcu6q4cwqnoylclanmmvpaem0pebnxezbgqzaqfa3yvzryednl7s.min.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="../../index.html"
            aria-label=""
        >
            Tech With K
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="../../#about"
                aria-label="Open the link: ../../#about"
            >
        
        
            <img class="header-picture" src="https://www.gravatar.com/avatar/0f50eb4dae65a5398f5884cbbc063ace?s=90" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->


    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="../../#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/0f50eb4dae65a5398f5884cbbc063ace?s=110" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Koorosh</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Developer / Security Researcher</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../index.html"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../all-archives"
                            
                            rel="noopener"
                            title="Archives"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../https:/github.com/kooroshh"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../https:/twitter.com/MrOplus"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../mailto:koorosh@programmer.net"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../2021/02/14/Defence-Against-The-Dark-Arts/"
                            aria-label=": Defence Against The Dark Arts"
                        >
                            Defence Against The Dark Arts
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-02-14T17:01:38+03:30">
	
		    Feb 14, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="../../categories/Web/">Web</a>, <a class="category-link" href="../../categories/Web/Security/">Security</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h3 id="Defence-Against-The-Dark-Arts-Finding-User’s-Real-IP-Address"><a href="#Defence-Against-The-Dark-Arts-Finding-User’s-Real-IP-Address" class="headerlink" title="Defence Against The Dark Arts - Finding User’s Real IP Address"></a>Defence Against The Dark Arts - Finding User’s Real IP Address</h3><p>one of the biggest challenges in web security and web development is finding the user’s real IP address (and identify the GEO Location in some cases) when the user is behind a Proxy Server or VPN.</p>
<p>now if we utilize the user’s browser and force the browser to send the user’s real IP address from the user side, the problem can be solved.</p>
<p>there are lots of ways to enumerate the user’s NICs but in most situations, users are behind a NAT, which means their NICs IP Addresses are not useful! that’s where we need WebRTC API.</p>
<h3 id="What-is-WebRTC"><a href="#What-is-WebRTC" class="headerlink" title="What is WebRTC?"></a>What is WebRTC?</h3><p>WebRTC is a P2P communication API that supports NAT Traversal and works in almost <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/WebRTC#Support">all browsers</a> without the need to install any addons or plugins.</p>
<h3 id="ICE-Candidates"><a href="#ICE-Candidates" class="headerlink" title="ICE Candidates"></a>ICE Candidates</h3><p>to establish a connection between two peers, each peer should send its network information to the other one, including IP addresses.</p>
<h3 id="PoC"><a href="#PoC" class="headerlink" title="PoC"></a>PoC</h3><p>the following javascript code logs the user’s available IP addresses to the console.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">window.RTCPeerConnection &#x3D; window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;</span><br><span class="line">var connection &#x3D; new RTCPeerConnection(&#123;</span><br><span class="line">        &quot;iceServers&quot;: [&#123;</span><br><span class="line">            url: &quot;stun:stun.l.google.com:19302&quot;</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;);</span><br><span class="line">connection.createDataChannel(&quot;&quot;);</span><br><span class="line">connection.createOffer(connection.setLocalDescription.bind(connection), ()&#x3D;&gt;&#123;&#125;);</span><br><span class="line">connection.onicecandidate &#x3D; function(ice) &#123;</span><br><span class="line">    if (ice.candidate !&#x3D; null)</span><br><span class="line">        console.log(ice.candidate.address);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>now if we create a UUID for each session and send the candidate(s) with that session to the server, we can identify the user’s the real IP address</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../2021/02/14/Defence-Against-The-Dark-Arts/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page 1 of 1</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2021 Koorosh. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="https://www.gravatar.com/avatar/0f50eb4dae65a5398f5884cbbc063ace?s=110" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Koorosh</h4>
        
            <div id="about-card-bio"><p>Developer / Security Researcher</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Full-Stack Engineer</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('../../assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="../../assets/js/script-geudzlmpj1goapgmb72rzubebc2mv8uts5kivsyfzo3tkm10cgpfkdcwh6yn.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
